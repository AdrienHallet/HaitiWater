{% extends "base.html" %}
{% load staticfiles %}
{% load leaflet_tags %}

{% block page_name %}
    {% leaflet_css %}
    {% leaflet_js %}
    <link rel="stylesheet" href="{% static "vendor/leaflet/draw.css" %}">
    <script src="{% static "vendor/leaflet/draw.js" %}"></script>
    <script src="{% static "gis.js" %}"></script>
    <link href="{% static "water_network.css" %}">
    Vue géographique
{% endblock %}

{% block page_content %}


    <section class="panel">
        <header class="panel-heading">
            <!-- Table block control actions -->
            <div class="panel-actions form-inline">
                <a href="#" class="fa fa-caret-down"></a>
            </div>
            <h2 class="panel-title">Carte interactive</h2>
        </header>
        <div class="panel-body">
            <div class="row">
                <div id="map-container" class="col-md-12">
                    {% leaflet_map "water-network-map" callback="waterGISInit" %}
                </div>

                <div id="details" class="col-md-3 collapse">
                    <div class="text-center">
                       <div class="btn-group">
                          <button id="button-draw" type="button" class="btn btn-small" title="Placer sur la carte">
                              <i class="fas fa-map-marker-alt"></i>
                          </button>
                          <button id="button-edit" type="button" class="btn btn-small" title="Editer la position">
                              <i class="fas fa-pen"></i>
                          </button>
                          <button id="button-remove" type="button" class="btn btn-small" title="Supprimer le marqueur">
                              <i class="fas fa-trash"></i>
                          </button>
                       </div>
                       <br>
                       <div id="error-detail-table" class="alert alert-danger hidden"></div>
                       <table id="detail-table" class="table table-condensed mb-none">
							<tbody>
                                <tr>
									<td class="text-left">Identifiant</td>
									<td class="text-left" id="element-details-id"></td>
								</tr>
                                <tr>
									<td class="text-left">Type</td>
									<td class="text-left" id="element-details-type"></td>
								</tr>
                                <tr>
									<td class="text-left">Emplacement</td>
									<td class="text-left" id="element-details-localization"></td>
								</tr>
                                <tr>
									<td class="text-left">Gestionnaire</td>
									<td class="text-left" id="element-details-manager"></td>
								</tr>
                                <tr>
									<td class="text-left">Utilisateurs</td>
									<td class="text-left" id="element-details-users"></td>
								</tr>
                                <tr>
									<td class="text-left">État</td>
									<td class="text-left" id="element-details-state"></td>
								</tr>
                                <tr>
									<td class="text-left">Volume mois dernier</td>
									<td class="text-left" id="element-details-current-month-cubic"></td>
								</tr>
                                <tr>
									<td class="text-left">Volume mensuel moyen</td>
									<td class="text-left" id="element-details-average-month-cubic"></td>
								</tr>
                                <tr>
									<td class="text-left">Volume total</td>
									<td class="text-left" id="element-details-total-cubic"></td>
								</tr>
							</tbody>
						</table>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="panel">
        <header class="panel-heading">
            <!-- Table block control actions -->
            <div class="panel-actions form-inline">
                <a id="call-water-modal" href="#modal-water-element" onclick="setupModalAdd()" class="modal-with-form fa fa-plus"></a>
                <a id="print-water_element" class="fa fa-print"></a>
                <a id="water_element-options" class="fas fa-cog"></a>
                <a href="#" class="fa fa-caret-down"></a>
            </div>
            <h2 class="panel-title">Éléments du réseau</h2>
        </header>
        <div class="panel-body">
            {% include "water_element_table.html" %}
        </div>
    </section>


    {% include 'water_element_modal.html' %}

{% endblock %}
